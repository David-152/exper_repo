# Проект: База данных для управления научной лабораторией

### Введение

#### ***Цель работы:***
Получение практических навыков работы с промышленными СУБД, проектирование базы данных (концептуальное, логическое, физическое), создание хранимых процедур, представлений, триггеров, индексов. Попрактиковаться в тестировании запросов (DQ — Data Quality).

---

#### ***Инструменты:***
- PostgreSQL 15
- Python 3.8+
- Gitlab CI

---

#### ***Описание проекта:***
Проект представляет собой базу данных для управления научной лабораторией. Основная цель — учет экспериментов, оборудования, сотрудников, материалов и отчетов. База данных позволяет отслеживать использование ресурсов, управлять проектами и анализировать результаты экспериментов.

---

### Предметная область и сущности

#### Сущности:
1. **Проекты (Projects)** — информация о научных проектах, включая название, даты начала и окончания, бюджет и описание.
2. **Эксперименты (Experiments)** — информация о проводимых экспериментах, включая даты начала и окончания, статус и описание.
3. **Сотрудники (Employees)** — информация о сотрудниках лаборатории, включая имя, должность, зарплату, отдел и даты начала/окончания работы.
4. **Оборудование (Equipment)** — информация об оборудовании лаборатории, включая название, местоположение и статус.
5. **Материалы (Materials)** — информация о материалах, используемых в экспериментах, включая название, количество, единицы измерения и даты начала/окончания использования.
6. **Отчёты (Reports)** — информация об отчётах, создаваемых по результатам экспериментов.
7. **Использование оборудования (Usage Equipment)** — информация об использовании оборудования в экспериментах.
8. **Использование материалов (Usage Materials)** — информация об использовании материалов в экспериментах.
9. **Активность сотрудников (Employees Activity)** — информация об активности сотрудников в проектах.

---

### Подробное описание каждой сущности и их назначения в БД

#### 1. **Проекты (Projects)**
- **Назначение**: Хранение информации о научных проектах.
- **Атрибуты**:
  - `project_id` — уникальный идентификатор проекта.
  - `name` — название проекта.
  - `start_date` — дата начала проекта.
  - `end_date` — дата окончания проекта.
  - `budget` — бюджет проекта.
  - `description` — краткое описание проекта.

#### 2. **Эксперименты (Experiments)**
- **Назначение**: Хранение информации о проводимых экспериментах.
- **Атрибуты**:
  - `experiment_id` — уникальный идентификатор эксперимента.
  - `project_id` — ссылка на проект.
  - `start_time` — дата начала эксперимента.
  - `end_time` — дата окончания эксперимента.
  - `status` — статус эксперимента.
  - `description` — краткое описание эксперимента.

#### 3. **Сотрудники (Employees)**
- **Назначение**: Хранение информации о сотрудниках лаборатории.
- **Атрибуты**:
  - `employee_id` — уникальный идентификатор сотрудника.
  - `name` — имя сотрудника.
  - `salary` — зарплата сотрудника.
  - `department` — отдел сотрудника.
  - `position` — должность сотрудника.
  - `start_date` — дата начала работы.
  - `end_date` — дата окончания работы.
  - `is_current` — флаг актуальности записи (SCD Type 2).

#### 4. **Оборудование (Equipment)**
- **Назначение**: Хранение информации об оборудовании лаборатории.
- **Атрибуты**:
  - `equipment_id` — уникальный идентификатор оборудования.
  - `name` — название оборудования.
  - `location` — местоположение оборудования.
  - `status` — статус оборудования.

#### 5. **Материалы (Materials)**
- **Назначение**: Хранение информации о материалах, используемых в экспериментах.
- **Атрибуты**:
  - `material_id` — уникальный идентификатор материала.
  - `name` — название материала.
  - `quantity` — количество материала.
  - `unit` — единицы измерения.
  - `start_date` — дата начала использования.
  - `end_date` — дата окончания использования.
  - `is_current` — флаг актуальности записи (SCD Type 2).

#### 6. **Отчёты (Reports)**
- **Назначение**: Хранение информации об отчётах по результатам экспериментов.
- **Атрибуты**:
  - `report_id` — уникальный идентификатор отчёта.
  - `experiment_id` — ссылка на эксперимент.
  - `report_date` — дата создания отчёта.

#### 7. **Использование оборудования (Usage Equipment)**
- **Назначение**: Хранение информации об использовании оборудования в экспериментах.
- **Атрибуты**:
  - `usage_equipment_id` — уникальный идентификатор использования оборудования.
  - `experiment_id` — ссылка на эксперимент.
  - `equipment_id` — ссылка на оборудование.
  - `usage_date` — дата использования.

#### 8. **Использование материалов (Usage Materials)**
- **Назначение**: Хранение информации об использовании материалов в экспериментах.
- **Атрибуты**:
  - `usage_material_id` — уникальный идентификатор использования материала.
  - `experiment_id` — ссылка на эксперимент.
  - `material_id` — ссылка на материал.
  - `usage_date` — дата использования.
  - `usage_quantity` — количество использованного материала.

#### 9. **Активность сотрудников (Employees Activity)**
- **Назначение**: Хранение информации об активности сотрудников в проектах.
- **Атрибуты**:
  - `ea_id` — уникальный идентификатор активности.
  - `project_id` — ссылка на проект.
  - `employee_id` — ссылка на сотрудника.
  - `start_date` — дата начала активности.

---

### Цель проекта

Создать базу данных для управления научной лабораторией, которая позволит:
- Учитывать эксперименты, оборудование, материалы и сотрудников.
- Отслеживать использование ресурсов.
- Управлять проектами и анализировать результаты экспериментов.

---

### Актуальность области

Научные лаборатории играют ключевую роль в исследованиях и разработках. Управление ресурсами, проектами и экспериментами требует эффективного учета и анализа данных. База данных для научной лаборатории позволяет автоматизировать эти процессы, повышая эффективность работы и снижая вероятность ошибок.

---

### Модели базы данных

#### Концептуальная модель
![Концептуальная модель](./docs/conceptual-model.png)

#### Логическая модель
![Логическая модель](./docs/logical-model.png)

#### Физическая модель

```sql
### Проекты (Projects)

| Название      | Описание          | Тип данных      | Ограничения |
|---------------|-------------------|-----------------|-------------|
| project_id    | ID проекта        | INTEGER         | PK          |
| name          | Название проекта  | VARCHAR(200)    | NOT NULL    |
| start_date    | Дата начала       | TIMESTAMP       | NOT NULL    |
| end_date      | Дата окончания    | TIMESTAMP       |             |
| budget        | Бюджет проекта    | DECIMAL(15, 2)  |             |
| description   | Краткое описание  | VARCHAR(200)    | NOT NULL    |

### Эксперименты (Experiments)

| Название      | Описание          | Тип данных      | Ограничения |
|---------------|-------------------|-----------------|-------------|
| experiment_id | ID эксперимента   | INTEGER         | PK          |
| project_id    | ID проекта        | INTEGER         | FK          |
| start_time    | Дата начала       | TIMESTAMP       | NOT NULL    |
| end_time      | Дата окончания    | TIMESTAMP       |             |
| status        | Статус            | VARCHAR(200)    | NOT NULL    |
| description   | Краткое описание  | VARCHAR(200)    | NOT NULL    |

### Сотрудники (Employees)

| Название      | Описание          | Тип данных      | Ограничения |
|---------------|-------------------|-----------------|-------------|
| employee_id   | ID сотрудника     | INTEGER         | PK          |
| name          | Имя сотрудника    | VARCHAR(200)    | NOT NULL    |
| salary        | Зарплата          | DECIMAL(15, 2)  | NOT NULL    |
| department    | Отдел             | VARCHAR(200)    | NOT NULL    |
| position      | Должность         | VARCHAR(200)    | NOT NULL    |
| start_date    | Дата начала       | TIMESTAMP       | NOT NULL    |
| end_date      | Дата окончания    | TIMESTAMP       |             |
| is_current    | Текущий статус    | BOOLEAN         |             |

### Оборудование (Equipment)

| Название      | Описание          | Тип данных      | Ограничения |
|---------------|-------------------|-----------------|-------------|
| equipment_id  | ID оборудования   | INTEGER         | PK          |
| name          | Название          | VARCHAR(200)    | NOT NULL    |
| location      | Местоположение    | VARCHAR(200)    | NOT NULL    |
| status        | Статус            | VARCHAR(50)     | NOT NULL    |

### Материалы (Materials)

| Название      | Описание          | Тип данных      | Ограничения |
|---------------|-------------------|-----------------|-------------|
| material_id   | ID материала      | INTEGER         | PK          |
| name          | Название материала| VARCHAR(200)    | NOT NULL    |
| quantity      | Количество        | INT             | NOT NULL    |
| unit          | Единицы измерения | VARCHAR(200)    | NOT NULL    |
| start_date    | Дата начала записи| TIMESTAMP       | NOT NULL    |
| end_date      | Дата окончания    | TIMESTAMP       |             |
| is_current    | Текущий статус    | BOOLEAN         |             |

### Отчеты (Reports)

| Название      | Описание          | Тип данных      | Ограничения |
|---------------|-------------------|-----------------|-------------|
| report_id     | ID отчета         | INTEGER         | PK          |
| experiment_id | ID эксперимента   | INTEGER         | FK          |
| report_date   | Дата отчета       | TIMESTAMP       | NOT NULL    |

### Использованное оборудование (Usage Equipment)

| Название              | Описание          | Тип данных      | Ограничения |
|-----------------------|-------------------|-----------------|-------------|
| usage_equipment_id    | ID исп.оборудования | INTEGER       | PK          |
| experiment_id         | ID эксперимента   | INTEGER         | FK          |
| equipment_id          | ID оборудования   | INTEGER         | FK          |
| usage_date            | Дата использования| TIMESTAMP       | NOT NULL    |

### Использованные материалы (Usage Materials)

| Название              | Описание          | Тип данных      | Ограничения |
|-----------------------|-------------------|-----------------|-------------|
| usage_material_id     | ID исп.материала  | INTEGER         | PK          |
| experiment_id         | ID эксперимента   | INTEGER         | FK          |
| material_id           | ID материала      | INTEGER         | FK          |
| usage_date            | Дата использования| TIMESTAMP       | NOT NULL    |
| usage_quantity        | Использовано      | INT             |             |

### Активность сотрудников (Employees Activity)

| Название      | Описание          | Тип данных      | Ограничения |
|---------------|-------------------|-----------------|-------------|
| ea_id         | ID активности     | INTEGER         | PK          |
| project_id    | ID проекта        | INTEGER         | FK          |
| employee_id   | ID сотрудника     | INTEGER         | FK          |
| start_date    | Дата              | TIMESTAMP       | NOT NULL    |
